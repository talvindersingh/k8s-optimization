{
  "instruction": "Improve the Kubernetes Deployment and Service for the web-app so it runs 3 replicas, exposes port 80 internally, adds readiness and liveness probes, declares CPU/memory requests and limits, and enables a non-root security context.",
  "original_code": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web-app\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web-app\n  template:\n    metadata:\n      labels:\n        app: web-app\n    spec:\n      containers:\n        - name: web\n          image: nginx:latest\n          ports:\n            - containerPort: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: web-app\nspec:\n  selector:\n    app: web-app\n  ports:\n    - port: 80\n      targetPort: 80\n",
  "original_manifest": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web-app\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: web-app\n  template:\n    metadata:\n      labels:\n        app: web-app\n    spec:\n      containers:\n        - name: web\n          image: nginx:latest\n          ports:\n            - containerPort: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: web-app\nspec:\n  selector:\n    app: web-app\n  ports:\n    - port: 80\n      targetPort: 80\n"
}
